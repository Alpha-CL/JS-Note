# prototype

#### prototype

> 原型是 function 对象的一个`属性`，它定义了构造函数制造出的对象的`公共祖先`
> 
> 通过该构造函数产生的对象，可以继承该原型的属性和方法
> 
> 原型也是对象


``` javascript
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * `实例化函数` 会继承 `构造函数`的 `属性` 和 `方法`
 * 
 */

function Father() {

}

Father.prototype.name = 'alpha';
Father.prototype.say = function {

    console.log('Hello World');
}


var son1 = new Father();

son1.name;                // alpha
son1.say;                 // Hello World


var son2 = new Father();

son2.name;                // alpha
son2.say;                 // Hello World


//--------------------------------------------------------------------------------------------------------------------//


/**
 * 实例化函数 和 构造函数 的属性和方法可以同时存在
 * 
 * 执行时，会有优先在 实例化函数自己内寻找对应的属性或方法
 */


function Father(name, age, sex) {

    this.name = name;
    this.age = age;
    this.sex = sex;
}

Father.prototype.LastName = 'beta';

var son = new Father('alpha', 18, 'male');

// =>   Father
//      age = 18
//      name = "alpha"
//      sex = "male"
//      __proto__ = Object {LastName: "beta", constructor: }

son.LastName;               'beta';


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - //


/**
 * 利用原型的特点和概念，可以提取共有属性
 * 
 * 减少代码冗余
 */
 

function Car(color, owner) {

    this.color = color;
    this.owner = owner;
}


// Car.prototype.height = 1400;                    // 抽取固定值，存放于 prototype 
// Car.prototyoe.lang = 4900;
// Car.prototype.carName = 'BMW';

// 利用对象的形式书写更简洁易懂的代码
Car.prototype =  {  

    height : 1400,
    lang : 4900,
    carName : 'BMW'
}


var car = new Car('red', 'alpha');

car.color;                  // red
car.height;                 // 1400
car.carName;                // 'BMW'


//--------------------------------------------------------------------------------------------------------------------//


/**
 * 构造函数和实例化函数的增删改查
 * 
 */


function Father(name) {

    this.name = name;
}

Father.prototype.LastName = 'James';

// =>   function Father(name) { this.name = name; }
//      arguments = null
//      caller = null
//      length = 1
//      name = "Father"
//      prototype = Object {LastName: "James", constructor: }
//      [[Scopes]] = Scopes[1]
//      __proto__ = function () { [native code] }


var son = new Father('alpha');                                          // 新建实例函数

// =>   Father
//      name = "alpha"
//      LastName = "Jordan"
//      __proto__ = Object {LastName: "James", constructor: }  


// 无法通过此种方法修改 构造函数原型上的属性和方法
son.LastName = 'Jordan';                                                // 增加实例函数的属性

// 修改构造函数原型上方法的属性值
// Father.prototype = 'Beta';                                           // 重新给构造函数原型上的属性赋值


son.LastName;               // James               


// 删除实例函数的属性
delete son.LastName;        // true

// 可以删除本来就没有的属性，系统会认为 `删除本来就没有的属性，这很 OK 啊`
delete son.Firstname;       // true



// 无法设置原型为空
Father.prototype = {};                               

console.log(son.LastName);                          // James

// 可以设置原型种指定属性或方法为空
Father.prototype.LastName = null;

console.log(son.LastName);                          // null


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### constructor

> prototype { constructor : function () {} }

``` javascript
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * constructor 是构造函数 prototype 的隐式属性之一
 * 
 */


function Car(color, name) {

    this.color = color;
    this.name = name;
}

var car = new Car();

console.log(car.constructor);           // function Car(color, name) { this.color = color; this.name = name; }


//--------------------------------------------------------------------------------------------------------------------//


/**
 * 构造函数可以通过 prototype 修改 constructor 的属性值
 * 
 */


function Father () {

    this.name = 'father';
    this.age = 99;
}

function Thief () {

    this.name = 'thief';
    this.age = 66;
}

var son = new Father();

Father.prototype.constructor = Thief;

console.log(son.constructor);           // function Thief () { this.name = 'thief'; this.age = 66; }


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

```

#### __proto__

> var _name;
> 
> 个人的一种命名规则，告知他人尽量别修改

``` javascript
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 实例函数的 __proto__ 指向是可以修改的
 * 
 * 
 */

function Father() {

    // this {
    //      __proto__ : Father.prototype
    // }
}

// Father.prototype.name = 'father';        // 当实例函数中和构造函数的继承的属性都没有时，实例函数会沿着 __proto__ 的指向去检索

var obj = {

    name : 'thief'
};

var son = new Father();


son.__proto__ = obj;

console.log(son.name);                      // thief


//--------------------------------------------------------------------------------------------------------------------//


/**
 * Father.prototype.name = 'GrandFather'; => 属性重新赋值
 * 
 */

function Father() {

    // this {
    //      __proto__ : Father.prototype
    // }
}

Father.prototype.name = 'GrandFather';

var son = new Father();

console.log(son.name);                   // thief


Father.prototype.name = 'GrandFather';


console.log(son.name);                   // GrandFather


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - //


/**
 * Father.prototype = {}; => 原型修改 prototype {} 
 * 
 */

function Father() {

    // this {
    //      __proto__ : Father.prototype
    // }
}

Father.prototype.name = 'father';

var son = new Father();

console.log(son.name);                   // father


Father.prototype = {

    name : 'GrandFather'
};


console.log(son.name);                   // father


// Father.prototype = { name : 'father' };
// 
// __proto__ = Father.prototype;
// 
// Father.prototype = { name : 'GrandFather' }


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


/**
 * 引用值的互相赋值
 * 
 */

var obj = { name : 'a' };

var obj1 = obj;

obj = { name : 'b' };


console.log(obj.name);                  // b

console.log(obj1.name);                 // a


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - //


/**
 * 考虑执行顺序
 * 
 */

function Father() {

    // this {
    //      __proto__ : Father.prototype
    // }
}

Father.prototype.name = 'father';       

Father.prototype = {                    

    name : 'GrandFather'
};

var son = new Father();                  // 因为 new 的时候，最后更改为 Father.prototype = {}; 所以按照这个实例化函数

console.log(son.name);                   // GrandFather


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```



## 原型链

``` javascript
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


Object{}                                // Object.prototype => end          // Object.prototype.__proto__ = null;


Grand.prototype.lastName = 'alpha';     // Grand.prototype.__proto__ -> Object.prototype
function Grand() {

}
var grand = new Grand();                // grand.__proto__ -> Grand.prototype


Father.prototype = grand;               // Father.prototype -> grand.__proto__
function Father() {
    
    this.name = 'xuming';
}
var father = new Father();              // father.__proto__ -> Father.prototype 


Son.prototype = father;                 // Son.prototype -> father.__proto__
function Son() {

    this.hobbit = 'smoke';
}
var son = new Son;                      // son.__proto__ -> Son.prototype


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - //


/**
 * add property
 * 
 * 只能给自己增加
 */

son.prototype.name = 'James';

=> fnName.prototype.key = value; {

    fnName.__proto__.key = value;
}


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - //


/**
 * delete property
 * 
 * 只能自己删除自己的
 */

delete Grand.prototype.lastName;

=> delete fnName.prototype.key; {

    delete fnName.__proto__.key;
}


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - //


/**
 * change property
 * 
 * 无法修改原始值，但可以修改引用值
 */

Father.prototype.wife = 'Zhuli';

father.__proto__.wife = 'Linda';

=> fn.prototype.key = newValue; {

    fn.__proto__.key = newValue;
}


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


function Grand() {}

function Father() {

    this.fortune = {
    
        car1 = 'visa'
    }
}

function Son() {}

var son = new Son();

console.log(son.fortune);           // 'visa'


son.fortune = 200;                  // 增加 实例函数 son(){} 的属性

son.fortune.card2 = 'master';       // 增加 Father(){} 中 fortune( 引用值才可以更改，原始值只能覆盖修改 ) 的属性和值


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - //


// view property

son.hobbit;                 // 'smoke'

=> fnName.prototype.key: value; {

    fnName.__proto__.key: value;
}


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```


``` javascript
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


Person.prototype = {

    name : 'alpah',
    sayName : function () {
    
        console.log(this.name);
    }
}

function Person() {

}

var person = new Person();


console.log(person.sayName());              // alpha


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - //


/**
 * sayName 中 this 的指向
 * 
 * 谁调用的这个方法，this 就指向谁
 */


Father.prototype = {

    name : 'alpah',
    sayName : function () {
    
        console.log(this.name);
    }
}

function Father() {

    this.name = 'beta';
}

var son = new Father();                  // 实例化函数后 son { this.name = 'beta' } -> Father{ prototype{ name : alpha} } 

// =>   Person
//      name = "beta"
//      __proto__ = Object {name: "alpah", sayName: }


console.log(son.sayName());                 // beta

console.log(Person.prototype.sayName());    // alpha


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - //


Person.prototype = {

    height : 100
};

function Person() {

    this.eat = function () {
    
        this.height ++;
    };
}

var person = new Person();

console.log(person.eat());                  // 101


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - //


// 建议使用 var obj = {};

var obj = {}; == var obj = new Object();        // 隐式 new


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### Object.create(prototype);

> 绝大多数对象的最终都会继承自 Object.prototype;

``` javascript
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 在 Person(){} 函数体为空的情况下
 * 
 * person1 == person2;
 */


fucntion Person() {

}

var person1 = new Person();

var Person2 = Object.create(Person.protytype);


//--------------------------------------------------------------------------------------------------------------------//


// 绝大多数对象的最终都会继承自 Object.prototype; ?

Object.create();

// TypeError: Object prototype may only be an Object or null: undefined
//            对象原型只能是一个对象或null：未定义

=> Object.create(Object); || Object.create(null);


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```



``` javascript


// 为何 undefined, null 无法调用 toString();

toString(radix?: number): string;


Object {

    prototype {
        
        toString();                 // toString 是 Object{}.prototype {} 的方法之一
    }
}


// unll 和 undefined 没有 原型，所以也没法调用 Object{}.prototype {} 中的 toString();

undefined(null && undefined).prototype => empty;


// null 和 


```




## call / apply

#### call

#### apply






































































