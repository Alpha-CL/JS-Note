# NPM

#### Install npm

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * npm -v || npm --version
 * 
 * 
 */

获取 npm 版本信息


//-------------------------------------------------------------------------------------------------------------------//


/**
 * 安装 npm
 * 
 * 
 */

由于 npm 的官方 registry 服务器位于国外，国内下载 package 可能会收到网速影响导致下载较慢

因此安装 npm 后，需配置国内镜像地址: https://reegistry.npm.taobao.org


cmd: npm config set registry https://reegistry.npm.taobao.org

npm config get registry                 // 设置后检查


//-------------------------------------------------------------------------------------------------------------------//


/**
 * 安装指定包
 * 
 * 
 * @packageName: 指定文件包名称
 */

npm install packageName 

npm i packageName


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * ./node_module
 * 
 * 
 * npm 默认包管理文件: 一般在 当前工程的根目录下
 */

随着开发的进展，node_module 目录文件会异常庞大，因此需要 .gitignore 设置忽略该文件目录

使用 npm 中的包时，npm 会自动管理依赖，自调下载该包所需的依赖包

如果本地安装包带有 CLI，npm 会将它的 CLI 脚本配置文件放置到 node_modules/.bin 文件下运行，使用 npx 调用即可

( 计算机环境变量，某些命令仅可以在指定文件下才可以运行，npx 类似暴露于全局的 npm )


//-------------------------------------------------------------------------------------------------------------------//


/**
 * 全局安装                     // 全局安装并非解决多工程公用包，而是为了提供全局的 CLI 工具
 * 
 * 
 * 安装全局包，可以在全局环境中使用相关命令行命令
 */

npm install --global packageName

npm config get prefix                           // 查看全局安装的配置目录


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


大部分情况下，都不需要全局安装包，除非:

1) 包的版本非常稳定，很少有大的更新

2) 命令行在各个工程中使用的非常频繁

3) CLI 工具仅在开发环境中提供支持，而非部属环境


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### npm config

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 创建 npm 配置文件
 * 
 * 
 * package.json             // 可以手动创建，大多时候使用命令创建
 */

npm init                    // 根据提示创建 npm 配置文件信息


npm init --yes              // 生成默认配置文件

npm init -y


//-------------------------------------------------------------------------------------------------------------------//


/**
 * package name:
 * 
 * 
 */

package 的名称，该名称必须是英文单词字符( 支持连字符 )


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * version(1.0.0):                  // 默认 (1.0.0)
 * 
 * 
 * 版本范围: 主版本号.次版本号.补丁版本号
 */

主版本号: 仅当程序发生了重大改变时，才会增长，如新增重要功能，新增了大量 API，技术架构发生了重大改变

次版本号: 仅当程序发生了一些小变化时才会增长，如新增了一些小功能，新增了一些辅助型 API

补丁版本号: 仅当解决了一些 bug 或 进行了一些局部优化时更新，如修复了某个函数的 bug，提升了某个函数的运行效率


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * description:
 * 
 * 
 */

packeage 的描述信息


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * homepage:
 * 
 * 
 */

package 的官网地址


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * git repository:
 * 
 * 
 */

package 的仓储地址( 通常指 git 或 svn 的地址 )，repository 的类型是 对象

{

    type: 仓储类型( git / svn )

    url: 地址
}


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * entry point:                     // main
 * 
 * 
 */

package 的入口文件，调用该 package 的开发者默认从该文件导入 package 的内容


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * test command:
 * 
 * 
 */

package 测试命令


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * keywords:
 * 
 * 
 */

设置搜索该 package 时的关键字


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * author:
 * 
 * 
 */

package 的作者，必须是有效的 npm 账户名，书写规范是 accoount<mail> eg: alpha<xiaodao_92@gmail.com>

( 错误的作者信息可能会导致发布时失效 )



//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * license:                     // 默认 ISC 
 * 
 * 
 */

package 发布协议


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### Engineering dependency of npm-config

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * package.json 最重要的作用
 * 
 * 
 * 记录当前工程的依赖
 */

dependencies: 生产环境的依赖包

devDependencies: 仅开发环境的依赖包


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


npm install                         // 安装所有依赖 dependencies + devDependencies

npm i


npm install --production            // 仅安装生产环境的依赖 dependencies


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


{
    "name": "6.1-Engineering",
    "version": "1.0.0",
    "description": "",
    "main": "index.js",
    "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
    },
    "keywords": [],
    "author": "",
    "license": "ISC",
    
    dependencies :{
        
        "xxx": "xxx"
    },
    
    devDependencies: {
        
        "xxx": "xxx"
    }
}


//-------------------------------------------------------------------------------------------------------------------//


/**
 * 为方便开发，npm 在 install 时，可加入额外参数，指定 package 的依赖配置信息
 * 
 * 
 */


npm i packageName                               // 安装到生产环境

npm i --save

npm i -S packageName


npm i --sava-dev packageName                    // 安装到依赖环境

npm i -D packageName



///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### How to require indexFile

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 如何引入 package 的 indexFile
 * 
 * 
 * 特殊情况: 若 require('packageName'); 引入的是 node 的内置模块，则会直接返回 node 中的内置模块
 */

当使用 node.js 导入模块时，如果模块的路径不是以 './ 或 ../' 开头

则 node 会认为导入的模块来自于 node_modules 目录              // require('packageName');


eg: 

let _ = require("lodash");           // 在还未有模块化开发时，npm 暴露给全局的变量为 _

=> 优先查找 node_modules/lodash.js

           node_modules/lodash/indexFile( 入口文件 )

=> 若在指定路径中未找到 入口文件，则会回溯到 上级目录寻找，直到回溯到 根目录，若还未找到，则抛出错误


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//



/**
 * 如何获取 入口文件                    // 此规则同样适用于 自创的 package
 * 
 * 
 */

1) 查看指定 package 中的 package.json 文件，读取 main 字段的值 作为 '入口文件'

2) 若 package.json 不包含 main 字段，则使用 index.js 作为 '默认入口文件'


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * 导入 package 中的指定文件
 * 
 * 
 */

eg: let test = require("lodash/fp/add");


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### 

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 
 * 
 * 
 */


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```



































