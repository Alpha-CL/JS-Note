<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <title>Title</title>


    <style>

        * {
            margin: 0;
            padding: 0;
        }

        #dv {
            position: absolute;
            left: 0;
            top: 0;
            margin-top: 20px;
            width: 200px;
            height: 100px;
            background-color: green;
        }

    </style>

</head>

<body>


<input type="button" value="匀速400" id="btn1">
<input type="button" value="匀速800" id="btn2">

<input type="button" value="变速400" id="btn3">
<input type="button" value="变速800" id="btn4">


<div id="dv"></div>


<script>


    function my$(ele) {

        return document.getElementById(ele)
    }


    function animate(element, target) {

        clearInterval(element.timeId);

        element.timeId = setInterval(function () {

            var current = element.offsetLeft;

            var step = 10;

            step = target > current ? step : -step;

            current += step;

            if (Math.abs(current - target) > Math.abs(step)) {

                element.style.left = current + 'px';

            } else {

                clearInterval(element.timeId);
                element.style.left = target + 'px';
            }

        }, 20);

    }


    my$('btn1').onclick = function () {

        animate(my$('dv'), 400);

    };

    my$('btn2').onclick = function () {

        animate(my$('dv'), 800);

    };


</script>


<script>


    /**
     *
     * 当前位置: current
     * 目标位置: target
     *
     * 缓动的效果: ( target - current ) / 10
     *
     * step = ( target - current ) / 10
     *
     * current += step;
     *
     */


    function vsAnimate(element, target) {

        //清除定时器
        clearInterval(element.timeId);

        element.timeId = setInterval(function () {

            //获取元素当前位置
            var current = element.offsetLeft;

            //设置每次移动步数
            var step = (target - current) / 10;

            //如果走的步数为正，则向上取正数，这样可以保证走到目的位置，步数为负数同理
            step = step > 0 ? Math.ceil(step) : Math.floor(step);

            current += step;

            element.style.left = current + 'px';

            if (current == target) {

                //清理定时器
                clearInterval(element.timeId);
            }

            //测试
            console.log('target: ' + target + ', current:' + current + 'step: ' + step)

        }, 20)
    }


    my$('btn3').onclick = function () {

        vsAnimate(my$('dv'), 400);

    };

    my$('btn4').onclick = function () {

        vsAnimate(my$('dv'), 800);

    };

</script>


</body>
</html>