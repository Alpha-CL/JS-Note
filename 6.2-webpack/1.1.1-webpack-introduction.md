# Webpack

#### webpack introduction

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * webpack
 * 
 * 
 */

1) webpack 使用层面很简单，原理很复杂

2) webpack 生态圈很繁荣，有海量第三方库


//-------------------------------------------------------------------------------------------------------------------//


/**
 * 浏览器端的模块化                     // 工程问题
 * 
 * 
 */

1) 效率问题: 精确的模块划分，造成了更多的 JS 文件，导致 更多 的请求，降低了页面的访问效率

2) 兼容性问题: 浏览器目前仅支持 ES6 模块化标准，并且还存在兼容性问题

3) 工具问题: 浏览器不支持 npm 下载的第三方包


//-------------------------------------------------------------------------------------------------------------------//


/**
 * 根本原因
 * 
 * 
 */

// node 环境中

运行的 JS 文件在本地，因此可以本地读取文件，效率必浏览器远程传输高很多


// 浏览器 环境中

开发状态( devtime ) 和 运行状态( runtime ) 的侧重点不一样


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


开发状态( devtime )

1) 模块划分越细越好

2) 支持多种模块化标准

3) 支持 npm 或 其他包管理器 下载的模块

4) 可以解决其他工程化问题


运行状态( runtime )

1) 文件越少越好

2) 文件体积越小越好

3) 代码内容越乱越好( 防止他人抄袭 )

4) 所有浏览器都要兼容

5) 可以解决其他运行时的问题，主要是执行效率问题


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


        + ---- devtime ---- +                               + ---- runtime ----- +
        |                   |                               |                    |
        |                   |                               |                    |
        |     Module-1      | =====> Construct Tool ======> |                    |
        |                   |                               |                    |
        |     Module-2      |          webpack              |                    |
        |                   |          grunt                |     target.js      |
        |     Module-3      |          gulp                 |                    |
        |                   |          browseerify          |                    |
        |     Module-N      |          fis                  |                    |
        |                   |          ...                  |                    |
        |                   |                               |                    |
        + ----------------- +                               + ------------------ +


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### webpack

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 打包所有的脚本
 * 
 * 
 * 通过开发时入口模块为起点，分析出所有依赖关系
 * 
 * 然后( 合并，压缩 ... )，最终生成运行时态的文件
 */


 .js
 
         .js
         
 .hbs            .png                                
                                                     .js     .css
         .sass           ======> webpack =======>
                                                     .jpg    .png        
 .cjs            .jpg             node                        
 
         .sass
         
 .sass
 
 Modules with dependencies                           static assets


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * webpack 的特点
 * 
 * 
 */

1) 为前端工程化而生

   webpack 致力于解决前端工程化( 基于浏览器环境 )


2) 简单易用

   支持零配置( 无需任何代码配置，即可使用 )


3) 强大的生态
   
   webpack 非常灵活，可扩展( 第三方库丰富 )，本身功能并不多，


4) 基于 node.js

   webpack 在构建过程中需要读取文件，构建过程中基于 node 环境中
   

5) 基于模块化

   webpack 在构建过程中需要分析依赖关系( 基于模块化入口文件分析依赖 )
   
   支持各种模块化标准( CommonJS，ES6，Module )


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### install webpack

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * install webpack                  // 全局安装
 * 
 * 
 * 建议本地根据项目安装( 全局安装会导致所有工程的 webpack 版本都是一样 )
 */


npm i -D webpack webpack-cli


// wepack: 核心包( 包含了 webpack 构建过程中用到的所有 API )
// 
// webpack-cli: 提供命令行调用 webpack 核心包中的 API( 用于构建 webpack )


//-------------------------------------------------------------------------------------------------------------------//


/**
 * execute webpack
 * 
 * 
 */


[npx] webpack


默认情况下: webpack 会以当前工程根目录下的 ./src/index.js 为入口文件分析模块依赖关系

          将打包好的代码放置到当前工程根目录下的 ./dist/main.js 中


//-------------------------------------------------------------------------------------------------------------------//


/**
 * webpack mode
 * 
 * 
 * 设置 webpack 打包环境
 */


webpack --mode=development


1) development

2) production                   // default mode



///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### Module compatibility

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * CommonJS
 * 
 * 
 */

exports.key = {

    prop,
    method
};

const moudle = require('./demo.js');

module.exports = {

}


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * ES6 Moudle
 * 
 * 
 */

export { propName, methodName };

import { exportListItemItem } form "exportUrl";


//-------------------------------------------------------------------------------------------------------------------//


/**
 * 无论模块之间遵循何种导入导出规范，webpack 都可以很好的兼容
 * 
 * 
 */


1) CommonJs export + ES6 import

2) ES6 export + CommonJs import

3) ...


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### 








































































