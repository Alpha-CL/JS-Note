<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>


    <style>

        * {
            margin: 0;
            padding: 0;
        }

        #dv {
            width: 200px;
            height: 100px;
            background-color: purple;
        }


    </style>


</head>
<body>


<input type="button" value="显示效果" id="btn">

<div id="dv"></div>


<div id="dv1">
    <ul>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
</div>


<script>

    function my$(ele) {

        return document.getElementById(ele);
    }


    my$('btn').onclick = function () {

        //获取元素距离左边位置的值
        console.log(my$('dv').offsetLeft);


        //谷歌 和 火狐 支持
        //IE8 不支持
        console.log(window.getComputedStyle(my$('dv'), null)['left']);

        //IE8 支持
        //火狐 和 谷歌 不支持
        console.log(my$('dv').currentStyle.left);

    };


    function getStyle1(element, attribute) {

        //判断浏览器是否支持这个方法
        if (window.getComputedStyle) {

            return window.getComputedStyle(element, null)[attribute];

        } else {

            return element.currentStyle[attribute];
        }
    }


    function getStyle(element, attribute) {

        return window.getComputedStyle ? window.getComputedStyle(element, null)[attribute] : element.currentStyle[attribute] || 0;
    }


    my$('btn').onclick = function () {


        console.log(getStyle(my$('dv'), 'top'));        //调用 top 时，有的浏览器会显示 auto，此时只需要设置属性 top: 0；即可
    };


</script>


<script>


    //变速动画增加单一属性值
    function animate1(element, attribute, target) {

        //清理定时器
        var current = parseInt(getStyle(element, attribute));

        element.timeId = setInterval(function () {

            //移动步数
            var step = (target - current) / 10;

            step = step > 0 ? Math.ceil(step) : Math.floor(step);

            current += step;

            element.style[attribute] = current + 'px';

            if (current == target) {

                //清理定时器
                clearInterval(element.timeId);
            }

            //测试代码
            console.log('目标位置: ' + target + ', 当前位置: ' + current + ', 每次移动步数: ' + step);

        }, 20);
    }


</script>


<script>

    my$('btn').onclick = function () {

        // var json = {
        //     width: 800,
        //     height: 400,
        //     left: 500,
        //     top: 600
        // };


        animate(my$('dv'), {'width': 800, 'height': 400, 'left': 500, 'top': 600});


    };

    /**
     *
     * 封装缓存函数一次增加多个属性
     *
     * element: 元素名称
     * attribute: 属性名称
     * target: 目标位置
     *
     */

    function animate(element, json) {

        //清理定时器
        clearInterval(element.timeId);

        element.timeId = setInterval(function () {

            var flag = true;        //默认全部到达目标

            for (var attribute in json) {

                //获取这个属性的当前的值
                var current = getStyle(element, attribute);

                //当前的属性对应的目标值
                var target = json[attribute];

                //移动的步数
                var step = (target - current) / 10;

                step = step > 0 ? Math.ceil(step) : Math.floor(step);

                current += step;

                element.style[attribute] = current + 'px';

                if (current != taget) {

                    flag = false
                }

            }

            //是否到达目标
            if (current == target) {

                clearInterval(element.timeId);
            }

            //测试代码
            console.log('目标位置: ' + target + ', 当前位置: ' + current + ', 每次移动步数: ' + step);

        }, 20);
    }


</script>


<script>


    /**
     *
     * 动画及回掉函数
     *
     * @param element
     * @param json
     * @param fn
     */

    function animate2(element, json, fn) {

        //清理定时器
        clearInterval(element.timeId);

        element.timeId = setInterval(function () {

            var flag = true;        //默认全部到达目标

            for (var attribute in json) {

                //获取这个属性的当前的值
                var current = getStyle(element, attribute);

                //当前的属性对应的目标值
                var target = json[attribute];

                //移动的步数
                var step = (target - current) / 10;

                step = step > 0 ? Math.ceil(step) : Math.floor(step);

                current += step;

                element.style[attribute] = current + 'px';

                if (current != taget) {

                    flag = false
                }

            }

            //是否到达目标
            if (flag) {

                clearInterval(element.timeId);

                //所有的属性到达目标才使用这个函数，前提是用户传入了这个函数
                if (fn) {

                    fn();
                }
            }

            //测试代码
            console.log('目标位置: ' + target + ', 当前位置: ' + current + ', 每次移动步数: ' + step);

        }, 20);
    }


</script>


<script>


    function animate(element, json, fn) {

        clearInterval(element.timeId);

        element.timeId = setInterval(function () {

            var flag = true;

            for (var attr in json) {

                if (attr == 'opacity') {

                    var current = getStyle(element, attr) * 100;

                    var target = json[attr] * 100;

                    var step = (target - current) / 100;

                    var step = (target - current) / 10;

                    step = step > 0 ? Math.ceil(step) : Math.floor(step);

                    current += step;

                    element.style[attr] = current / 100;

                } else if (attr == 'zIndex') {

                    element.style[attr] = json[attr];

                } else {

                    var current = parseInt(getStyle(element, attr));

                    var target = json[attr];

                    var step = (target - current) / 10;

                    step = step > 0 ? Math.ceil(step) : Math.floor(step);

                    current += step;

                    element.style[attr] = current + 'px';
                }
            }

            if (flag) {

                clearInterval(element.timeId);

                //所有的属性到达目标才使用这个函数，前提是用户传入了这个函数
                if (fn) {

                    fn();
                }
            }

        }, 20);
    }


</script>


<script>



    var list = my$('box').getElementsByTagName('li');

    for (var i = 0; i < list.length; i++) {

        list[i].style.backgroundImage = "url(imges/" + (i + 1) + ".jpg)";

        list[i].onmouseover = mouseoverHandle;

        list[i].onmouseout = mouseoutHandle;
    }

    function mouseoverHandle() {

        for (var j = 0; j < list.length; j++) {

            animate(list[j], {'width': 800});
        }
        animate(this, {'width': 800});
    }

    function mouseoutHandle() {

        for (var j = 0; j < list.length; j++) {

            animate(list[j], {'width': 240});
        }
    }



</script>


</body>
</html>




































